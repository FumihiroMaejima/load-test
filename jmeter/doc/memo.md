
# 負荷試験の基礎

## 負荷試験の目的

## オンプレミス時代の負荷試験の目的

1. 各種ユースケースを特定し、それぞれにおけるシステムの応答性能を推測する。
2. 高負荷時のシステムの性能改善を行う。
3. 目的の性能を提供する為に必要なハードウェアを予め選定する。

## クラウド時代の負荷試験の目的

1. 各種ユースケースを特定し、それぞれにおけるシステムの応答性能を推測する。
2. 高負荷時のシステムの性能改善を行う。
3. 目的の性能を提供する為に必要なハードウェアを予め選定する。
4. システムがスケール性能を持つこと確認する。
5. システムのスケール特性を把握する。


- [] いくつかのスループットのレベル(例: 100rps, 500rps, 1000rps, 2000rps, 5000rps...)
- [] 実際にこのWebシステムは目標値を超えて、最大どの程度のスループットを処理出来るか。

---

### スループット

単位時間に処理を行う量のこと。
webシステムでは、「１秒間に処理を行うHTTPリクエストの数」を基準にすることが多い。(rps(Request Per Second)と言う単位)

「ネットワーク上を流れるデータ転送速度」の事を言うこともある。
このスループットをネットワーク帯域、最大スループットをネットワーク帯域幅と呼ぶ。

---

### レイテンシ

処理時間のこと。
該当システムにおいて、(平均)応答時間が1秒から0.1秒に短縮


---


## システム性能改善の基礎知識

### スループットの改善

### レイテンシの改善



---

## 良い負荷試験が実施されている事を示す指標

1. 負荷試験対象システムに負荷が集中している状態
2. ボトルネック部分が特定出来ている状態

---

| 名前 | バージョン |
| :--- | :---: |
| PHP | 8.1.9(php:8.1.9-fpm-alpine) |
| MySQL | 5.7 |
| Nginx | 1.23(nginx:1.23-alpine) |
| Laravel | 9.* |

[backend/README](./app/backend/README.md)

---

## volumeとnetworkの作成

networkは`gateway`と`subnet`を必ず指定する。(値は任意。)

```shell
docker volume create ${PROJECT_NAME}-db-store
docker volume create ${PROJECT_NAME}-redis-store
docker volume create ${PROJECT_NAME}-mail-store
docker network create --gateway=172.19.0.1 --subnet=172.19.0.0/16 ${PROJECT_NAME}-net
```


---

