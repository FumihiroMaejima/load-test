
# About Locust

参考: [Locust Documentation](https://docs.locust.io/en/stable/index.html)

---

# CLI

```shell
$ locust --headless --users 10 --spawn-rate 1 -H http://your-domain.com
[2021-07-24 10:41:10,947] .../INFO/locust.main: No run time limit set, us
```

# CLI in Docker Container

in worker contaioner.

KeyboardInterrupt = control + C

```shell
$ docker exec -it load-test-worker-1 bash
$ cd /mnt/locust/

$ locust --headless --users 10 --spawn-rate 1 -H http://master:8089
[2022-11-01 15:54:41,394] 32bf2381f827/INFO/locust.main: No run time limit set, use CTRL+C to interrupt
[2022-11-01 15:54:41,394] 32bf2381f827/INFO/locust.main: Starting Locust 2.13.0
Type     Name                                                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                                0     0(0.00%) |      0       0       0      0 |    0.00        0.00

[2022-11-01 15:54:41,395] 32bf2381f827/INFO/locust.runners: Ramping to 10 users at a rate of 1.00 per second
Type     Name                                                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /hello                                                                   84  84(100.00%) |     17       0      48      5 |    0.00        0.00
GET      /world                                                                   83  83(100.00%) |     17       0      51      6 |    0.00        0.00
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                              167 167(100.00%) |     17       0      51      6 |    0.00        0.00

Type     Name                                                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /hello                                                                  261 261(100.00%) |     18       0      52      7 |   32.50       32.50
GET      /world                                                                  259 259(100.00%) |     18       0      56      6 |   32.00       32.00
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                              520 520(100.00%) |     18       0      56      7 |   64.50       64.50

Type     Name                                                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /hello                                                                 1035 1035(100.00%) |      9       0      52      1 |   56.25       56.25
GET      /world                                                                 1031 1031(100.00%) |     10       0      56      1 |   55.75       55.75
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                             2066 2066(100.00%) |     10       0      56      1 |  112.00      112.00

Type     Name                                                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /hello                                                                 1527 1527(100.00%) |     11       0      52      2 |  141.17      141.17
GET      /world                                                                 1525 1525(100.00%) |     11       0      56      2 |  140.67      140.67
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                             3052 3052(100.00%) |     11       0      56      2 |  281.83      281.83

KeyboardInterrupt
2022-11-01T15:54:49Z
[2022-11-01 15:54:49,623] 32bf2381f827/INFO/locust.main: Shutting down (exit code 1)
Type     Name                                                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /hello                                                                 1642 1642(100.00%) |     11       0      52      2 |  199.59      199.59
GET      /world                                                                 1636 1636(100.00%) |     11       0      56      2 |  198.86      198.86
--------|-------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                             3278 3278(100.00%) |     11       0      56      2 |  398.45      398.45

Response time percentiles (approximated)
Type     Name                                                                         50%    66%    75%    80%    90%    95%    98%    99%  99.9% 99.99%   100% # reqs
--------|-----------------------------------------------------------------------|--------|------|------|------|------|------|------|------|------|------|------|------
GET      /hello                                                                         2      5      8     41     44     46     48     48     51     52     52   1642
GET      /world                                                                         2      5      7     41     44     46     50     51     54     56     56   1636
--------|-----------------------------------------------------------------------|--------|------|------|------|------|------|------|------|------|------|------|------
         Aggregated                                                                     2      5      8     41     44     46     48     50     52     56     56   3278

Error report
# occurrences      Error
------------------|------------------------------------------------------------------------------------------------------------------------------------
1642               GET /hello: HTTPError('404 Client Error: NOT FOUND for url: http://master:8089/hello')
1636               GET /world: HTTPError('404 Client Error: NOT FOUND for url: http://master:8089/world')
------------------|------------------------------------------------------------------------------------------------------------------------------------

```


---
